<header class="custom-header">
  <div class="header-container">
    <div class="site-title">
        <span class="titre-pc">Lag Spirit MC - Chapitre Ljønskar</span>
        <span class="titre-mobile">Lag Spirit MC<br />Chapitre Ljønskar</span>
    </div>
    
    <nav class="nav-desktop">
      <ul>
        <li><a href="/">Accueil</a></li>
        <li><a href="/evenements">Événements</a></li>
        <li><a href="/galerie">Galerie</a></li>
        <li><a href="/boutique">Boutique</a></li>
        <li><a href="/contact">Contact</a></li>
        <li><a href="/connexion">Se connecter</a></li>
      </ul>
    </nav>

    <!-- Burger pour mobile -->
     <button class="burger" onclick="document.querySelector('.nav-mobile').classList.toggle('open')">&#9776;</button>
  </div>

  <!-- Menu mobile slide -->
  <nav class="nav-mobile">
    <ul>
      <li><a href="/">Accueil</a></li>
      <li><a href="/evenements">Événements</a></li>
      <li><a href="/galerie">Galerie</a></li>
      <li><a href="/boutique">Boutique</a></li>
      <li><a href="/contact">Contact</a></li>
      <li><a href="/connexion">Se connecter</a></li>
    </ul>
  </nav>

  <div class="header-separator"></div>
</header>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const menu = document.querySelector('.nav-mobile');
  if (!menu) return;

  // Clone du menu mobile
  const clone = menu.cloneNode(true);
  clone.id = "menu-or";               // ID pour le styler facilement
  clone.style.position = "fixed";
  clone.style.top = "0";
  clone.style.left = "0";
  clone.style.width = "100vw";
  clone.style.height = "100vh";
  clone.style.zIndex = "999999999";   // Devant tout
  clone.style.display = "none";       // Caché au début

  document.body.appendChild(clone);

  // Ouvre / ferme
  document.querySelector('.burger').onclick = () => {
    clone.style.display =
      clone.style.display === "none" ? "block" : "none";
  };
});

  // === Lien actif ===
  const currentPath = window.location.pathname.replace(/\/$/, ''); // ex : /galerie
  const links = document.querySelectorAll("nav a");

  links.forEach(link => {
    const linkPath = new URL(link.href).pathname.replace(/\/$/, '');

    // Cas spécial accueil
    if ((currentPath === '' || currentPath === '/index.html') && (linkPath === '' || linkPath === '/index.html')) {
      link.classList.add('active');
    }

    // Pour les autres pages
    else if (linkPath === currentPath) {
      link.classList.add('active');
    }
  });
});
</script>


<header class="custom-header">
  <div class="header-container">
    
    <div class="site-title">
        <span class="titre-pc">Lag Spirit MC - Chapitre Ljønskar</span>
        <span class="titre-mobile">Lag Spirit MC<br />Chapitre Ljønskar</span>
    </div>

    <!-- ===== MENU DESKTOP ===== -->
    <nav class="nav-desktop">
      <ul>
        <li><a href="/">Accueil</a></li>
        <li><a href="/evenements">Événements</a></li>
        <li><a href="/galerie">Galerie</a></li>
        <li><a href="/boutique">Boutique</a></li>
        <li><a href="/contact">Contact</a></li>

        <!-- Zone dynamique -->
        <?php if (is_user_logged_in()): ?>
            <li><a href="/mon-profil">Mon profil</a></li>
            <li><a href="<?php echo wp_logout_url('/'); ?>">Déconnexion</a></li>
        <?php else: ?>
            <li><a href="/connexion">Se connecter</a></li>
        <?php endif; ?>
      </ul>
    </nav>

    <!-- Burger mobile -->
    <button class="burger" onclick="document.querySelector('.nav-mobile').classList.toggle('open')">
        &#9776;
    </button>

  </div>

  <!-- ===== MENU MOBILE ===== -->
  <nav class="nav-mobile">
    <ul>
      <li><a href="/">Accueil</a></li>
      <li><a href="/evenements">Événements</a></li>
      <li><a href="/galerie">Galerie</a></li>
      <li><a href="/boutique">Boutique</a></li>
      <li><a href="/contact">Contact</a></li>

      <?php if (is_user_logged_in()): ?>
          <li><a href="/mon-profil">Mon profil</a></li>
          <li><a href="<?php echo wp_logout_url('/'); ?>">Déconnexion</a></li>
      <?php else: ?>
          <li><a href="/connexion">Se connecter</a></li>
      <?php endif; ?>
    </ul>
  </nav>

  <div class="header-separator"></div>
</header>



<nav class="nav-desktop">
  <ul>
    <li><a href="/">Accueil</a></li>
    <li><a href="/evenements">Événements</a></li>
    <li><a href="/galerie">Galerie</a></li>
    <li><a href="/boutique">Boutique</a></li>
    <li><a href="/contact">Contact</a></li>

    <?php if ( is_user_logged_in() ) : 
        $user = wp_get_current_user();
    ?>
        <li><a href="/mon-profil">Mon profil</a></li>
        <li><a href="<?php echo wp_logout_url( home_url() ); ?>">Déconnexion</a></li>
        <li class="hello-user">Bonjour, <?php echo $user->user_login; ?></li>
    <?php else : ?>
        <li><a href="/connexion">Se connecter</a></li>
    <?php endif; ?>
  </ul>
</nav>


<nav class="nav-mobile">
  <ul>
    <li><a href="/">Accueil</a></li>
    <li><a href="/evenements">Événements</a></li>
    <li><a href="/galerie">Galerie</a></li>
    <li><a href="/boutique">Boutique</a></li>
    <li><a href="/contact">Contact</a></li>

    <?php if ( is_user_logged_in() ) : 
        $user = wp_get_current_user();
    ?>
        <li><a href="/mon-profil">Mon profil</a></li>
        <li><a href="<?php echo wp_logout_url( home_url() ); ?>">Déconnexion</a></li>
        <li class="hello-user">Bonjour, <?php echo $user->user_login; ?></li>
    <?php else : ?>
        <li><a href="/connexion">Se connecter</a></li>
    <?php endif; ?>
  </ul>
</nav>



<header class="custom-header">
  <div class="header-container">
    <div class="site-title">
        <span class="titre-pc">Lag Spirit MC - Chapitre Ljønskar</span>
        <span class="titre-mobile">Lag Spirit MC<br />Chapitre Ljønskar</span>
    </div>

    <!-- ===== MENU DESKTOP ===== -->
    <nav class="nav-desktop">
      <ul>
        <li><a href="/">Accueil</a></li>
        <li><a href="/evenements">Événements</a></li>
        <li><a href="/galerie">Galerie</a></li>
        <li><a href="/boutique">Boutique</a></li>
        <li><a href="/contact">Contact</a></li>

        <?php if ( is_user_logged_in() ) : 
          $user = wp_get_current_user(); ?>
          
          <li><a href="/mon-profil">Mon profil</a></li>
          <li><a href="<?php echo wp_logout_url( home_url() ); ?>">Déconnexion</a></li>

        <?php else : ?>

          <li><a href="/connexion">Se connecter</a></li>

        <?php endif; ?>
      </ul>
    </nav>


    <!-- ===== BURGER MOBILE ===== -->
    <button class="burger" onclick="document.querySelector('.nav-mobile').classList.toggle('open')">
      &#9776;
    </button>
  </div>

  <!-- ===== MENU MOBILE ===== -->
  <nav class="nav-mobile">
    <ul>
      <li><a href="/">Accueil</a></li>
      <li><a href="/evenements">Événements</a></li>
      <li><a href="/galerie">Galerie</a></li>
      <li><a href="/boutique">Boutique</a></li>
      <li><a href="/contact">Contact</a></li>

      <?php if ( is_user_logged_in() ) : ?>
        
        <li><a href="/mon-profil">Mon profil</a></li>
        <li><a href="<?php echo wp_logout_url( home_url() ); ?>">Déconnexion</a></li>

      <?php else : ?>

        <li><a href="/connexion">Se connecter</a></li>

      <?php endif; ?>
    </ul>
  </nav>

  <div class="header-separator"></div>
</header>



// ====== gestion du lien "Mon compte" ======
(function() {
    const accountLink = document.querySelector("a[href='/mon-compte']");

    if (!accountLink) return;

    // Si l'utilisateur n'est PAS connecté → redirection vers connexion
    <?php if (!is_user_logged_in()) : ?>
        accountLink.href = "/connexion";
    <?php else : ?>
        // Si l'utilisateur est connecté → renvoi vers Mon Profil
        accountLink.href = "/mon-profil";
    <?php endif; ?>
})();
</script>


<script>
document.addEventListener("DOMContentLoaded", () => {

    // URL des pages (à adapter SI besoin)
    const loginPage = "/mon-profil";      // ta page connexion
    const profilePage = "/mon-profil";    // ta page profil après connexion

    const accountLink = document.getElementById("ljonskar-account-link");

    // RÉCUPÉRATION ÉTAT CONNEXION WP
    fetch('/wp-json/wp/v2/users/me', { credentials: 'include' })
        .then(r => r.json())
        .then(user => {
            // Si on reçoit un ID → utilisateur connecté
            const loggedIn = user && user.id;

            accountLink.addEventListener("click", (e) => {
                e.preventDefault();

                if (loggedIn) {
                    window.location.href = profilePage;
                } else {
                    window.location.href = loginPage;
                }
            });
        })
        .catch(() => {
            // Si API renvoie erreur → pas connecté
            accountLink.addEventListener("click", (e) => {
                e.preventDefault();
                window.location.href = loginPage;
            });
        });
});
</script>