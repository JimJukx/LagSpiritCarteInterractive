<?php
/**
 * Plugin Name: Lag Spirit â€“ Carte interactive
 * Description: Affiche la carte interactive Lag Spirit via un shortcode.
 * Version: 0.1
 * Author: Lag Spirit MC
 */

if (!defined('ABSPATH')) {
    exit; // EmpÃªche l'accÃ¨s direct
}

/**
 * Shortcode : [lagspirit_carte]
 * Optionnel : [lagspirit_carte src="https://autre-url.com/"]
 */
function lagspirit_carte_shortcode($atts = []) {

    // ðŸ” URL par dÃ©faut de ta carte (remplace par ton URL Vercel)
    $defaults = [
        'src' => 'https://lag-spirit-carte-interractive.vercel.app/'
    ];

    $atts = shortcode_atts($defaults, $atts, 'lagspirit_carte');
    $src  = esc_url($atts['src']);

    // HTML retournÃ© par le shortcode
    ob_start();
    ?>
    <div class="lagspirit-carte-wrapper" style="width:100%;max-width:1400px;margin:0 auto;">
        <iframe
            src="<?php echo $src; ?>"
            style="width:100%;height:80vh;border:none;"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
    </div>
    <?php
    return ob_get_clean();
}
add_shortcode('lagspirit_carte', 'lagspirit_carte_shortcode');